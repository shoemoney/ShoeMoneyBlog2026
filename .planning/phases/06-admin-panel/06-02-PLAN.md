---
phase: 06-admin-panel
plan: 02
type: execute
wave: 2
depends_on: ["06-01"]
files_modified:
  - resources/views/components/admin/layouts/app.blade.php
  - resources/views/components/admin/sidebar.blade.php
  - app/Livewire/Admin/Dashboard.php
  - resources/views/livewire/admin/dashboard.blade.php
  - routes/web.php
autonomous: true

must_haves:
  truths:
    - "Admin sees sidebar with navigation links"
    - "Admin sees dashboard with summary stats"
    - "Sidebar highlights current section"
    - "Admin layout includes Livewire styles/scripts"
  artifacts:
    - path: "resources/views/components/admin/layouts/app.blade.php"
      provides: "Admin layout wrapper with sidebar"
      contains: "x-admin.sidebar"
    - path: "resources/views/components/admin/sidebar.blade.php"
      provides: "Navigation sidebar component"
      contains: "admin.dashboard"
    - path: "app/Livewire/Admin/Dashboard.php"
      provides: "Dashboard Livewire component"
      contains: "#[Layout"
  key_links:
    - from: "app/Livewire/Admin/Dashboard.php"
      to: "components.admin.layouts.app"
      via: "#[Layout] attribute"
      pattern: "Layout.*admin"
---

<objective>
Create admin layout with sidebar navigation and dashboard component.

Purpose: Establish the visual foundation for the admin panel with consistent navigation and a welcome dashboard showing post/comment counts.

Output: Admin layout Blade component, sidebar navigation, and Dashboard Livewire component with basic stats.
</objective>

<execution_context>
@/Users/shoemoney/.claude/get-shit-done/workflows/execute-plan.md
@/Users/shoemoney/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/06-admin-panel/06-RESEARCH.md
@.planning/phases/06-admin-panel/06-01-SUMMARY.md
@routes/web.php
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create admin layout and sidebar components</name>
  <files>
    resources/views/components/admin/layouts/app.blade.php
    resources/views/components/admin/sidebar.blade.php
  </files>
  <action>
1. Create admin layout at resources/views/components/admin/layouts/app.blade.php:
   - Full HTML document with Tailwind via @vite
   - @livewireStyles in head, @livewireScripts before closing body
   - Two-column flex layout: sidebar (w-64) + main content (flex-1)
   - Include sidebar via x-admin.sidebar
   - Main area with white background, padding, and {{ $slot }}
   - Flash message display for success/error sessions

2. Create sidebar at resources/views/components/admin/sidebar.blade.php:
   - Dark background (bg-gray-800 text-white)
   - Site title/logo at top linking to frontend
   - Navigation links:
     - Dashboard (route: admin.dashboard)
     - Posts (route: admin.posts.index)
     - Comments (route: admin.comments.index)
     - Categories (route: admin.categories.index)
     - Tags (route: admin.tags.index)
     - Users (route: admin.users.index)
   - Active state highlighting using request()->routeIs()
   - Logout button at bottom (POST form to logout route)
   - Use wire:navigate for SPA-like navigation

Styling: Match the dark sidebar pattern from research. Keep it simple.
  </action>
  <verify>
    ls -la resources/views/components/admin/layouts/app.blade.php
    ls -la resources/views/components/admin/sidebar.blade.php
    grep -r "x-admin.sidebar" resources/views/components/admin/layouts/app.blade.php
  </verify>
  <done>
    - Admin layout exists with sidebar + main content areas
    - Sidebar has all navigation links with active states
    - Livewire styles/scripts included in layout
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Dashboard Livewire component</name>
  <files>
    app/Livewire/Admin/Dashboard.php
    resources/views/livewire/admin/dashboard.blade.php
    routes/web.php
  </files>
  <action>
1. Create Dashboard component at app/Livewire/Admin/Dashboard.php:
   ```php
   <?php

   namespace App\Livewire\Admin;

   use App\Models\Comment;
   use App\Models\Post;
   use App\Models\User;
   use Livewire\Attributes\Layout;
   use Livewire\Attributes\Title;
   use Livewire\Component;

   #[Layout('components.admin.layouts.app')]
   #[Title('Dashboard')]
   class Dashboard extends Component
   {
       public function render()
       {
           return view('livewire.admin.dashboard', [
               'postCount' => Post::count(),
               'publishedCount' => Post::published()->count(),
               'draftCount' => Post::draft()->count(),
               'pendingComments' => Comment::pending()->count(),
               'userCount' => User::count(),
           ]);
       }
   }
   ```

2. Create dashboard view at resources/views/livewire/admin/dashboard.blade.php:
   - Welcome message with user name
   - Grid of stat cards (3 columns on large, 1 on mobile):
     - Total Posts (with published/draft breakdown)
     - Pending Comments (with link to moderation)
     - Total Users
   - Each card: white bg, shadow, rounded, icon, count, label
   - Use Tailwind utilities for styling

3. Update routes/web.php admin group:
   - Replace placeholder route with Livewire component:
   ```php
   Route::get('/', \App\Livewire\Admin\Dashboard::class)->name('admin.dashboard');
   ```
   - Add the admin check middleware inline or as separate middleware
   - For simplicity, add check in route group using closure middleware:
   ```php
   Route::prefix('admin')
       ->middleware(['auth'])
       ->group(function () {
           // Admin check - 403 for non-admins
           Route::middleware(function ($request, $next) {
               if (!$request->user()->isAdmin()) {
                   abort(403, 'Admin access required.');
               }
               return $next($request);
           })->group(function () {
               Route::get('/', \App\Livewire\Admin\Dashboard::class)->name('admin.dashboard');
               // More admin routes will be added here
           });
       });
   ```
  </action>
  <verify>
    php artisan livewire:list | grep Dashboard
    php artisan route:list --path=admin
    curl -I http://localhost:8000/admin (after login, should return 200)
  </verify>
  <done>
    - Dashboard component renders with stats
    - Route updated to use Livewire component
    - Stats show correct counts from database
  </done>
</task>

</tasks>

<verification>
- [ ] Admin layout renders correctly with sidebar
- [ ] Sidebar shows all navigation links
- [ ] Dashboard displays post, comment, and user counts
- [ ] Active navigation state highlights correctly
- [ ] Logout button works
- [ ] Flash messages display when present
</verification>

<success_criteria>
1. /admin renders Dashboard component with admin layout
2. Sidebar navigation links to all admin sections
3. Dashboard shows accurate post/comment/user statistics
4. Responsive layout works on mobile
5. wire:navigate provides SPA-like transitions
</success_criteria>

<output>
After completion, create `.planning/phases/06-admin-panel/06-02-SUMMARY.md`
</output>
