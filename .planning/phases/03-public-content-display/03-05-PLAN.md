---
phase: 03-public-content-display
plan: 05
type: execute
wave: 3
depends_on: ["03-02", "03-03"]
files_modified:
  - resources/views/posts/show.blade.php
  - app/Http/Controllers/PostController.php
autonomous: true

must_haves:
  truths:
    - "User can view full post content with preserved formatting"
    - "Post displays title, author, date, reading time, categories, tags"
    - "WordPress shortcodes render as HTML elements"
  artifacts:
    - path: "resources/views/posts/show.blade.php"
      provides: "Single post view with prose styling"
      contains: "prose"
    - path: "app/Http/Controllers/PostController.php"
      provides: "Controller returning Blade view for show"
      contains: "view('posts.show'"
  key_links:
    - from: "resources/views/posts/show.blade.php"
      to: "rendered_content accessor"
      via: "Blade echo"
      pattern: "rendered_content"
---

<objective>
Build the single post view with full content display and typography styling.

Purpose: Show complete blog post with proper formatting for WordPress migrated content.
Output: Single post view with prose styling, updated PostController show method.
</objective>

<execution_context>
@/Users/shoemoney/.claude/get-shit-done/workflows/execute-plan.md
@/Users/shoemoney/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/03-public-content-display/03-RESEARCH.md
@.planning/phases/03-public-content-display/03-02-SUMMARY.md
@.planning/phases/03-public-content-display/03-03-SUMMARY.md

Reference files:
@app/Http/Controllers/PostController.php
@app/Models/Post.php
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create single post view</name>
  <files>resources/views/posts/show.blade.php</files>
  <action>
Create resources/views/posts/show.blade.php:

1. Wrap in <x-layout> component
2. Article wrapper with max-w-4xl mx-auto
3. Header section (mb-8):
   - H1 with post title (text-4xl font-bold text-gray-900)
   - Meta row (mt-4 flex items-center text-gray-600 space-x-4):
     - "By {{ $post->author->display_name ?? $post->author->name }}"
     - Date: `<time>{{ $post->published_at->format('F j, Y') }}</time>`
     - Reading time: "{{ $post->reading_time }} min read"
   - Categories row (mt-4 flex flex-wrap gap-2):
     - @if($post->categories->isNotEmpty())
     - Each category as pill link: px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full hover:bg-blue-200

4. Content div with Tailwind Typography prose classes:
   ```
   prose prose-lg prose-slate max-w-none
   prose-headings:font-bold
   prose-a:text-blue-600 hover:prose-a:underline
   prose-img:rounded-lg prose-img:shadow-md
   dark:prose-invert
   ```
   - Use {!! $post->rendered_content !!} (unescaped, shortcodes processed)

5. Footer section (mt-12 pt-6 border-t border-gray-200):
   - @if($post->tags->isNotEmpty())
   - "Tags" label (text-sm font-semibold text-gray-500 uppercase tracking-wider)
   - Tags as hashtag links: #{{ $tag->name }}
  </action>
  <verify>
File exists at resources/views/posts/show.blade.php
Contains prose classes for typography
Uses rendered_content accessor
  </verify>
  <done>Single post view displays full content with typography styling</done>
</task>

<task type="auto">
  <name>Task 2: Update PostController show to return view</name>
  <files>app/Http/Controllers/PostController.php</files>
  <action>
Update app/Http/Controllers/PostController.php show method:

1. Add import at top if not present:
   - use Illuminate\Support\Str;

2. Change show() method return type from JsonResponse to View

3. Update show() method:
   - Keep existing query with date validation and firstOrFail()
   - Add SEO before return:
     ```php
     seo()
         ->title($post->title . ' - ShoeMoney')
         ->description($post->excerpt ?: Str::limit(strip_tags($post->content), 160))
         ->url(url($post->url));
     ```
   - Return: return view('posts.show', compact('post'));

4. Remove the JSON placeholder response from show method.

5. Update use statement: keep both Illuminate\View\View and Illuminate\Http\JsonResponse (or just View if no JSON responses remain).
  </action>
  <verify>
curl http://localhost:8000/2015/08/10/some-post-slug/ returns HTML
Page contains prose-styled article content
  </verify>
  <done>Single post route returns Blade view with full content</done>
</task>

</tasks>

<verification>
- Visit any post URL (e.g., click from homepage)
- Post displays with title, author, date, reading time
- Content styled with prose typography (proper headings, paragraphs, links)
- Shortcodes rendered as HTML (no raw [shortcode] visible)
- Categories display as pills, tags as hashtags
- SEO meta tags present in page source
</verification>

<success_criteria>
- Full post content displays with preserved formatting
- Typography classes style all content elements (headings, links, images, lists)
- Shortcodes converted to HTML by rendered_content accessor
- Post metadata (author, date, categories, tags) visible
- SEO meta tags include post title and excerpt
</success_criteria>

<output>
After completion, create `.planning/phases/03-public-content-display/03-05-SUMMARY.md`
</output>
