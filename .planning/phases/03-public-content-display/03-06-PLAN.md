---
phase: 03-public-content-display
plan: 06
type: execute
wave: 3
depends_on: ["03-03", "03-04"]
files_modified:
  - resources/views/categories/show.blade.php
  - resources/views/tags/show.blade.php
  - app/Http/Controllers/CategoryController.php
  - app/Http/Controllers/TagController.php
autonomous: true

must_haves:
  truths:
    - "User can browse category pages showing filtered posts"
    - "User can browse tag pages showing filtered posts"
    - "Archive pages show taxonomy name and description"
  artifacts:
    - path: "resources/views/categories/show.blade.php"
      provides: "Category archive view"
      contains: "x-post-card"
    - path: "resources/views/tags/show.blade.php"
      provides: "Tag archive view"
      contains: "x-post-card"
  key_links:
    - from: "app/Http/Controllers/CategoryController.php"
      to: "resources/views/categories/show.blade.php"
      via: "view() helper"
      pattern: "view\\('categories\\.show'"
---

<objective>
Build category and tag archive pages with filtered post listings.

Purpose: Allow users to browse posts by category or tag taxonomy.
Output: Category and tag archive views using post-card component.
</objective>

<execution_context>
@/Users/shoemoney/.claude/get-shit-done/workflows/execute-plan.md
@/Users/shoemoney/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/03-public-content-display/03-RESEARCH.md
@.planning/phases/03-public-content-display/03-03-SUMMARY.md
@.planning/phases/03-public-content-display/03-04-SUMMARY.md

Reference files:
@app/Http/Controllers/CategoryController.php
@app/Http/Controllers/TagController.php
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create category archive view and update controller</name>
  <files>resources/views/categories/show.blade.php, app/Http/Controllers/CategoryController.php</files>
  <action>
1. Create resources/views/categories/show.blade.php (mkdir categories dir if needed):
   - Wrap in <x-layout>
   - Container with max-w-4xl mx-auto
   - Header section (mb-8):
     - "Category" label: text-sm font-semibold text-blue-600 uppercase tracking-wider
     - H1: category name (text-4xl font-bold text-gray-900)
     - Description paragraph if category->description exists
   - Posts list with divide-y divide-gray-200:
     - @forelse($posts as $post)
     - <x-post-card :post="$post" />
     - @empty with "No posts in this category" message
   - Pagination: {{ $posts->links() }}

2. Update app/Http/Controllers/CategoryController.php:
   - Change return type from JsonResponse to View
   - Add seo() call:
     ```php
     seo()
         ->title($category->name . ' - ShoeMoney')
         ->description($category->description ?: 'Posts in ' . $category->name);
     ```
   - Return view('categories.show', compact('category', 'posts'));
   - Remove JSON response
  </action>
  <verify>
curl http://localhost:8000/category/uncategorized/ returns HTML (or any valid category slug)
Page shows category name and filtered posts
  </verify>
  <done>Category archive displays taxonomy info and filtered posts</done>
</task>

<task type="auto">
  <name>Task 2: Create tag archive view and update controller</name>
  <files>resources/views/tags/show.blade.php, app/Http/Controllers/TagController.php</files>
  <action>
1. Create resources/views/tags/show.blade.php (mkdir tags dir if needed):
   - Nearly identical structure to category view
   - "Tag" label instead of "Category"
   - Use $tag variable instead of $category
   - Description paragraph if $tag->description exists

2. Update app/Http/Controllers/TagController.php:
   - Read current file first to understand structure
   - Change return type from JsonResponse to View
   - Add seo() call:
     ```php
     seo()
         ->title('#' . $tag->name . ' - ShoeMoney')
         ->description($tag->description ?: 'Posts tagged ' . $tag->name);
     ```
   - Return view('tags.show', compact('tag', 'posts'));
   - Remove JSON response
  </action>
  <verify>
curl http://localhost:8000/tag/money/ returns HTML (or any valid tag slug)
Page shows tag name and filtered posts
  </verify>
  <done>Tag archive displays taxonomy info and filtered posts</done>
</task>

</tasks>

<verification>
- Visit /category/{slug}/ - shows category name, description, filtered posts
- Visit /tag/{slug}/ - shows tag name, description, filtered posts
- Both use post-card component for consistent display
- Pagination works on archives with many posts
- Empty archives show friendly message
</verification>

<success_criteria>
- Category pages display category name and description
- Tag pages display tag name with hashtag styling
- Both archive types show paginated, filtered posts
- Reuses post-card component from 03-04
- SEO meta tags include taxonomy name
</success_criteria>

<output>
After completion, create `.planning/phases/03-public-content-display/03-06-SUMMARY.md`
</output>
