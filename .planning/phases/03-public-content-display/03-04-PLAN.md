---
phase: 03-public-content-display
plan: 04
type: execute
wave: 3
depends_on: ["03-02", "03-03"]
files_modified:
  - resources/views/posts/index.blade.php
  - resources/views/components/post-card.blade.php
  - app/Http/Controllers/PostController.php
autonomous: true

must_haves:
  truths:
    - "User can view paginated blog homepage with post excerpts"
    - "Post cards show title, date, author, and category links"
    - "Pagination links appear when more than 10 posts"
  artifacts:
    - path: "resources/views/posts/index.blade.php"
      provides: "Homepage blog listing view"
      contains: "x-layout"
    - path: "resources/views/components/post-card.blade.php"
      provides: "Reusable post excerpt card"
      contains: "@props"
    - path: "app/Http/Controllers/PostController.php"
      provides: "Controller returning Blade views"
      contains: "return view"
  key_links:
    - from: "app/Http/Controllers/PostController.php"
      to: "resources/views/posts/index.blade.php"
      via: "view() helper"
      pattern: "view\\('posts\\.index'"
---

<objective>
Build the blog homepage with paginated post listing and post-card component.

Purpose: Display recent blog posts on homepage with consistent card styling.
Output: Homepage view, reusable post-card component, updated PostController.
</objective>

<execution_context>
@/Users/shoemoney/.claude/get-shit-done/workflows/execute-plan.md
@/Users/shoemoney/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/03-public-content-display/03-RESEARCH.md
@.planning/phases/03-public-content-display/03-02-SUMMARY.md
@.planning/phases/03-public-content-display/03-03-SUMMARY.md

Reference files:
@app/Http/Controllers/PostController.php
@app/Models/Post.php
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create post-card component</name>
  <files>resources/views/components/post-card.blade.php</files>
  <action>
Create resources/views/components/post-card.blade.php:

1. Use @props(['post']) directive
2. Article wrapper with bottom border and vertical padding (border-b border-gray-200 py-6)
3. Title as linked h2:
   - Link to $post->url
   - text-2xl font-bold text-gray-900
   - Hover state: group-hover:text-blue-600 (wrap link in group class)
4. Meta line (flex items-center text-sm text-gray-500 space-x-4):
   - Published date: `<time datetime="...">{{ $post->published_at->format('F j, Y') }}</time>`
   - Author name: {{ $post->author->display_name ?? $post->author->name }}
   - Reading time: {{ $post->reading_time }} min read
5. Excerpt paragraph (mt-3 text-gray-600):
   - Use Str::limit(strip_tags($post->excerpt ?: $post->content), 200)
6. Categories row (mt-3 flex flex-wrap gap-2):
   - Loop through $post->categories
   - Each as small link: text-xs font-medium text-blue-600 hover:text-blue-800
  </action>
  <verify>
File exists at resources/views/components/post-card.blade.php
Contains @props directive
Contains link to $post->url
  </verify>
  <done>Post-card component displays excerpt, meta, and category links</done>
</task>

<task type="auto">
  <name>Task 2: Create posts index view (homepage)</name>
  <files>resources/views/posts/index.blade.php</files>
  <action>
Create resources/views/posts/index.blade.php (mkdir posts dir if needed):

1. Wrap in <x-layout> component
2. Container div with max-w-4xl mx-auto
3. H1 heading: "Latest Posts" (text-4xl font-bold text-gray-900 mb-8)
4. Posts list div with divide-y divide-gray-200:
   - @forelse($posts as $post)
   - <x-post-card :post="$post" />
   - @empty - show "No posts found" message
   - @endforelse
5. Pagination nav section (mt-8):
   - {{ $posts->links() }} for Laravel pagination

Do NOT set SEO in view - the controller will call seo() before returning view.
  </action>
  <verify>
File exists at resources/views/posts/index.blade.php
Contains x-layout wrapper
Contains x-post-card usage
Contains $posts->links()
  </verify>
  <done>Homepage view renders paginated post listing with post cards</done>
</task>

<task type="auto">
  <name>Task 3: Update PostController index to return view</name>
  <files>app/Http/Controllers/PostController.php</files>
  <action>
Update app/Http/Controllers/PostController.php index method:

1. Add imports at top:
   - use Illuminate\View\View; (instead of JsonResponse for index)

2. Change index() method:
   - Return type: View (not JsonResponse)
   - Keep existing query with published()->with('author', 'categories')
   - Add seo() call before return:
     ```php
     seo()
         ->title('ShoeMoney - Making Money Online')
         ->description('The original blog about making money online since 2003');
     ```
   - Return: return view('posts.index', compact('posts'));

3. Remove the JSON placeholder response.

Keep show() method as JsonResponse for now (will be updated in 03-05).
  </action>
  <verify>
curl http://localhost:8000/ returns HTML (not JSON)
Page contains "Latest Posts" heading
  </verify>
  <done>Homepage route returns Blade view with paginated posts</done>
</task>

</tasks>

<verification>
- php artisan serve, then visit http://localhost:8000/
- Page displays "Latest Posts" heading
- Post cards show title, date, author, reading time
- Pagination links appear if > 10 posts
- Clicking post title navigates to post URL (will 404 until 03-05, but link exists)
</verification>

<success_criteria>
- Homepage displays paginated posts
- Each post shows title, excerpt, author, date, reading time, categories
- Post titles link to correct WordPress-style URLs
- Pagination controls appear at bottom
- SEO meta tags present in page source
</success_criteria>

<output>
After completion, create `.planning/phases/03-public-content-display/03-04-SUMMARY.md`
</output>
