---
phase: 04-comment-system
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - composer.json
  - resources/views/components/layout.blade.php
  - config/honeypot.php
autonomous: true

must_haves:
  truths:
    - "Livewire components can be rendered in Blade views"
    - "Honeypot spam protection available for forms"
    - "Rate limiting available for Livewire actions"
  artifacts:
    - path: "composer.json"
      provides: "Livewire, honeypot, and rate-limiting packages"
      contains: "livewire/livewire"
    - path: "resources/views/components/layout.blade.php"
      provides: "Livewire scripts loaded"
      contains: "@livewireStyles"
    - path: "config/honeypot.php"
      provides: "Honeypot configuration"
  key_links:
    - from: "resources/views/components/layout.blade.php"
      to: "livewire"
      via: "@livewireStyles and @livewireScripts directives"
      pattern: "@livewire(Styles|Scripts)"
---

<objective>
Install Livewire and spam protection packages, update layout for Livewire support

Purpose: Establish the reactive component infrastructure needed for the comment system
Output: Livewire packages installed, layout configured with Livewire directives
</objective>

<execution_context>
@/Users/shoemoney/.claude/get-shit-done/workflows/execute-plan.md
@/Users/shoemoney/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/04-comment-system/04-RESEARCH.md

@resources/views/components/layout.blade.php
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Livewire and spam protection packages</name>
  <files>composer.json, composer.lock</files>
  <action>
Install required packages for comment system:
```bash
composer require livewire/livewire spatie/laravel-honeypot danharrin/livewire-rate-limiting
```

After installation, publish the honeypot config:
```bash
php artisan vendor:publish --tag=honeypot-config
```

Verify installation by checking that:
- `vendor/livewire/livewire` directory exists
- `config/honeypot.php` file was published
  </action>
  <verify>
Run `composer show livewire/livewire` - shows Livewire 3.x installed
Run `composer show spatie/laravel-honeypot` - shows package installed
Run `composer show danharrin/livewire-rate-limiting` - shows package installed
Run `ls config/honeypot.php` - file exists
  </verify>
  <done>All three packages installed, honeypot config published</done>
</task>

<task type="auto">
  <name>Task 2: Update layout with Livewire directives</name>
  <files>resources/views/components/layout.blade.php</files>
  <action>
Add Livewire styles and scripts to the layout component.

In the `<head>` section, after `@vite(...)`, add:
```blade
@livewireStyles
```

Before the closing `</body>` tag, add:
```blade
@livewireScripts
```

Note: While Livewire 3 can auto-inject when using @vite, explicit directives ensure compatibility and clarity. The layout already uses `@vite(['resources/css/app.css', 'resources/js/app.js'])`.
  </action>
  <verify>
Run `grep -E "@livewire(Styles|Scripts)" resources/views/components/layout.blade.php` - shows both directives
Run `php artisan view:cache && php artisan view:clear` - no errors
  </verify>
  <done>Layout includes @livewireStyles in head and @livewireScripts before body close</done>
</task>

<task type="auto">
  <name>Task 3: Create Livewire directories</name>
  <files>app/Livewire/Comments/.gitkeep, resources/views/livewire/comments/.gitkeep</files>
  <action>
Create the directory structure for comment Livewire components:

```bash
mkdir -p app/Livewire/Comments
mkdir -p resources/views/livewire/comments
touch app/Livewire/Comments/.gitkeep
touch resources/views/livewire/comments/.gitkeep
```

These directories will hold:
- `app/Livewire/Comments/` - CommentSection.php, CommentForm.php
- `resources/views/livewire/comments/` - comment-section.blade.php, comment-form.blade.php
  </action>
  <verify>
Run `ls -la app/Livewire/Comments/` - directory exists
Run `ls -la resources/views/livewire/comments/` - directory exists
  </verify>
  <done>Livewire component directories created and ready for use</done>
</task>

</tasks>

<verification>
- `php artisan livewire:publish --config` runs without error (optional - default config works)
- Fresh `php artisan serve` starts without Livewire-related errors
- Loading any page (e.g., homepage) shows Livewire assets in page source (livewire.js)
</verification>

<success_criteria>
1. Livewire 3.x package installed and autoloaded
2. spatie/laravel-honeypot installed with config published
3. danharrin/livewire-rate-limiting installed
4. Layout includes @livewireStyles and @livewireScripts
5. Directory structure ready for comment components
</success_criteria>

<output>
After completion, create `.planning/phases/04-comment-system/04-01-SUMMARY.md`
</output>
